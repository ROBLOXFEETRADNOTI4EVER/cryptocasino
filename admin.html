<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adjusted Profile Div</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="crypto.css">
    <link rel="shortcut icon" href="images/logo/noBackground/Untitled_2_-removebg-preview.png" type="image/png">
    <style>
        body {
            background: #2e2e2e;
            color: white;
            margin: 0; 
            padding: 0;
            font-family: Arial, sans-serif;
            font-size: 14px;
        }

        #Logo {
            text-align: left;
            padding: 10px;
        }

        #Logo img {
            vertical-align: middle;
            height: 80px;
        }

        #Btn {
            border-radius: 10px;
            margin: 5px; 
            font-size: 2em; 
            padding: 3px 6px; 
        }

        #Btn:hover {
            font-size: 2em; 
        }

        hr {
            border: none;
            height: 1px;
            background-color: dodgerblue;
            margin: 10px 0;
        }

        h1 {
            font-size: 1.2em; 
            margin-left: 10px; 
            margin-top: 10px;
        }

        #stats{
            justify-content: center;
            align-items: center;
            background: rgba(145, 145, 145, 0.048);
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
            padding: 20px; 
            border-radius: 10px;
            width: 90%; 
            text-align: center;
            background: linear-gradient(45deg, #181717 0%, #00000073 100%);
            animation: gradient 10s ease-in-out both;
            background-size: 400%; 
            margin: 30px 0 0 20px; 
            font-size: 1em; 
        }
        #userProfile {
            justify-content: center;
            align-items: center;
            background: rgba(145, 145, 145, 0.048);
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
            padding: 20px; 
            border-radius: 10px;
            width: 450px; 
            text-align: center;
            background: linear-gradient(45deg, #2e2e2e 0%, #aa6f6f73 100%);
            animation: gradient 10s ease-in-out both;
            background-size: 400%; 
            margin: 30px 0 0 20px; 
            font-size: 1em; 
        }

        #userProfile img {
            height: 60px; 
            border-radius: 50%;
        }

        #proficepicturechangbtn {
            border-radius: 20px; 
            border: none;
            font-size: 1em; 
            background: linear-gradient(45deg, #b907ab 0%, #aa6f6f73 100%);
            animation: gradient 1s ease-in-out infinite;
            margin-top: -20px; 
            padding: 5px 10px; 
            cursor: pointer;
        }

        #proficepicturechangbtn:hover {
            background: linear-gradient(45deg, #b90784 0%, #db888873 100%);
        }

        #proficepicturechangbtn:active {
            background: linear-gradient(45deg, #ffffff 0%, #5e5e5e 100%);
        }

        h2 {
            font-size: 1.1em; 
            margin-top: 10px;
            margin-bottom: 15px; 
        }

        #balanceContainer {
            display: flex;
            flex-direction: row;
            justify-content: center;
            gap: 20px; 
            margin-top: 20px; 
        }

        #Balance2Guisnexttoteachother{
            display: flex;
            flex-direction: row;
            justify-content: center;
            gap: 20px; 
            margin-top: 20px; 
        }
        #Balancestuffinsidediv, 
        #Balancestuffinsidediv1 {
            justify-content: center;
            align-items: center;
            background: rgba(145, 145, 145, 0.048);
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
            padding: 15px; 
            border-radius: 10px;
            width: 6em; 
            text-align: center;
            background: linear-gradient(45deg, #2e2e2e 0%, #aa6f6f73 100%);
            animation: gradient 10s ease-in-out infinite;
            background-size: 400%;
            font-size: 1em; 
        }

        p, a {
            font-size: 1em; 
        }

        #pfpInput {
            display: none;
        }

        #errorUploadMessage {
            color: red;
            font-family: monospace;
        }

        #logoutContainer {
            display: flex;
            justify-content: flex-end;
            width: 100%;
        }
        
        #logoutBtn {
            border-radius: 20px; 
            border: none;
            font-size: 1em; 
            background: linear-gradient(45deg, #b90707 0%, #aa6f6f73 100%);
            animation: gradient 1s ease-in-out infinite;
            margin-top: 13px; 
            padding: 5px 10px; 
            cursor: pointer;
        }

        #logoutBtn:hover {
            background: linear-gradient(45deg, #b90784 0%, #db888873 100%);
        }

        #logoutBtn:active {
            background: linear-gradient(45deg, #ffffff 0%, #5e5e5e 100%);
        }

        #displayAccountRegisteredMsg {
            color: #2e2e2e;
        }

        /* Continuous Crypto Ticker Styles */
        .stock-ticker {
            overflow: hidden;
            background: #1c1c1c;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            position: relative;
            height: 20px;
            white-space: nowrap;
        }

        .ticker-inner {
            display: inline-block;
            width: 200%; /* Two sets side by side */
            animation: scroll-left 30s linear infinite;
            box-sizing: border-box;
        }

        .ticker-set {
            display: inline-block;
            width: 50%;
        }

        .crypto-item {
            display: inline-block;
            margin: 0 40px;
            font-size: 1.1em;
        }

        .company {
            color: #08b5cc;
            font-weight: bold;
            margin-right: 5px;
        }

        .price {
            color: #fff;
            margin-right: 5px;
        }

        .change {
            color: #ff4d4d;
        }

        @keyframes scroll-left {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        #allUsers{
            justify-content: center;
            align-items: center;
            background: rgba(145, 145, 145, 0.048);
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
            padding: 15px; 
            border-radius: 10px;
            width: 12em; 
            text-align: center;
            background: linear-gradient(45deg, #5529a8 0%, #ffffff73 100%);
            animation: gradient 10s ease-in-out infinite;
            background-size: 400%;
            font-size: 1em; 
        }
        #ourwallet{
            justify-content: center;
            align-items: center;
            background: rgba(145, 145, 145, 0.048);
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
            padding: 15px; 
            border-radius: 10px;
            width: 12em; 
            text-align: center;
            background: linear-gradient(45deg, #5529a8 0%, #ffffff73  100%);
            animation: gradient 10s ease-in-out infinite;
            background-size: 400%;
            font-size: 1em; 
        }
        #MyWallet{
            margin-top: 5%;
            margin-left: 15%;
            justify-content: center;
            align-items: center;
            background: rgba(145, 145, 145, 0.048);
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
            padding: 15px; 
            border-radius: 10px;
            width: 43em; 
            height: 6em;
            text-align: center;
            background: linear-gradient(45deg, #5529a8 0%, #ffffff73  100%);
            animation: gradient 10s ease-in-out infinite;
            background-size: 400%;
            font-size: 1em; 
            text-align: left;
        }
        #secoundndGuiBtn{
            border: none;
            font-size: large;
        }
        #usersonlinetoday{
            justify-content: center;
            align-items: center;
            background: rgba(145, 145, 145, 0.048);
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
            padding: 15px; 
            border-radius: 10px;
            width: 12em; 
            text-align: center;
            background: linear-gradient(45deg,  #5529a8 0%, #ffffff73  100%);
            animation: gradient 10s ease-in-out infinite;
            background-size: 400%;
            font-size: 1em; 
        }

    </style>




<style>
  .container {
    --uib-size: 40px;
    --uib-color: black;
    --uib-speed: .9s;
    --uib-stroke: 5px;
    --mask-size: calc(var(--uib-size) / 2 - var(--uib-stroke));
    position: relative;
    display: flex;
    align-items: center;
    text-align: center;
    justify-content: flex-start;
    height: var(--uib-size);
    width: var(--uib-size);
    -webkit-mask: radial-gradient(
      circle var(--mask-size),
      transparent 99%,
      #000 100%
    );
    mask: radial-gradient(circle var(--mask-size), transparent 99%, #000 100%);
    background-image: conic-gradient(transparent 25%, var(--uib-color));
    animation: spin calc(var(--uib-speed)) linear infinite;
    border-radius: 50%;
  }

  @keyframes spin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }
</style>



<style>
  .container1 {
    --uib-size: 35px;
    --uib-color: black;
    --uib-speed: 1.5s;
    --uib-dot-size: calc(var(--uib-size) * 0.4);
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    height: var(--uib-dot-size);
    width: var(--uib-size);
  }

  .container1::before,
  .container1::after {
    content: '';
    position: absolute;
    height: var(--uib-dot-size);
    width: var(--uib-dot-size);
    border-radius: 50%;
    background-color: var(--uib-color);
    flex-shrink: 0;
    transition: background-color 0.3s ease;
  }

  .container1::before {
    animation: orbit var(--uib-speed) linear infinite;
  }

  .container1::after {
    animation: orbit var(--uib-speed) linear calc(var(--uib-speed) / -2) infinite;
  }

  @keyframes orbit {
    0% {
      transform: translateX(calc(var(--uib-size) * 0.25)) scale(0.73684);
      opacity: 0.65;
    }
    5% {
      transform: translateX(calc(var(--uib-size) * 0.235)) scale(0.684208);
      opacity: 0.58;
    }
    10% {
      transform: translateX(calc(var(--uib-size) * 0.182)) scale(0.631576);
      opacity: 0.51;
    }
    15% {
      transform: translateX(calc(var(--uib-size) * 0.129)) scale(0.578944);
      opacity: 0.44;
    }
    20% {
      transform: translateX(calc(var(--uib-size) * 0.076)) scale(0.526312);
      opacity: 0.37;
    }
    25% {
      transform: translateX(0%) scale(0.47368);
      opacity: 0.3;
    }
    30% {
      transform: translateX(calc(var(--uib-size) * -0.076)) scale(0.526312);
      opacity: 0.37;
    }
    35% {
      transform: translateX(calc(var(--uib-size) * -0.129)) scale(0.578944);
      opacity: 0.44;
    }
    40% {
      transform: translateX(calc(var(--uib-size) * -0.182)) scale(0.631576);
      opacity: 0.51;
    }
    45% {
      transform: translateX(calc(var(--uib-size) * -0.235)) scale(0.684208);
      opacity: 0.58;
    }
    50% {
      transform: translateX(calc(var(--uib-size) * -0.25)) scale(0.73684);
      opacity: 0.65;
    }
    55% {
      transform: translateX(calc(var(--uib-size) * -0.235)) scale(0.789472);
      opacity: 0.72;
    }
    60% {
      transform: translateX(calc(var(--uib-size) * -0.182)) scale(0.842104);
      opacity: 0.79;
    }
    65% {
      transform: translateX(calc(var(--uib-size) * -0.129)) scale(0.894736);
      opacity: 0.86;
    }
    70% {
      transform: translateX(calc(var(--uib-size) * -0.076)) scale(0.947368);
      opacity: 0.93;
    }
    75% {
      transform: translateX(0%) scale(1);
      opacity: 1;
    }
    80% {
      transform: translateX(calc(var(--uib-size) * 0.076)) scale(0.947368);
      opacity: 0.93;
    }
    85% {
      transform: translateX(calc(var(--uib-size) * 0.129)) scale(0.894736);
      opacity: 0.86;
    }
    90% {
      transform: translateX(calc(var(--uib-size) * 0.182)) scale(0.842104);
      opacity: 0.79;
    }
    95% {
      transform: translateX(calc(var(--uib-size) * 0.235)) scale(0.789472);
      opacity: 0.72;
    }
    100% {
      transform: translateX(calc(var(--uib-size) * 0.25)) scale(0.73684);
      opacity: 0.65;
    }
  }
</style>




  
</head>
<body>
    <div id="Logo">
        <img src="images/Untitled(1).png" alt="Logo" id="lLogo" draggable="false">
        <input type="button" id="Btn" value="HomePage">
        <input type="button" id="Btn" value="PlayGames">
        <input type="button" id="Btn" value="FAQ">
        <input type="button" id="Btn" value="User">
    </div>

    <hr>
    <div class="stock-ticker">
        <div class="ticker-inner">
            <div class="ticker-set" id="tickerSet1"></div>
            <div class="ticker-set" id="tickerSet2"></div>
        </div>
    </div>
    <hr>

    <!-- Admin Login Section -->
    <div id="adminLogin" style="display: none;">
        <h2>Admin Login</h2>
        <label for="adminUsername">Username</label>
        <input type="text" id="adminUsername" placeholder="Enter username" required>
        <br>
        <label for="adminPassword">Password</label>
        <input type="password" id="adminPassword" placeholder="Enter password" required>
        <br>
        <div id="captchaContainer" style="margin-top: 10px; display: none;">
            <label for="captcha">Verify youâ€™re not a robot:</label>
            <div class="h-captcha" data-sitekey="4bee923e-e88a-42aa-92b2-d8e8f226a9e8"></div>
        </div>
        <br>
        <button id="adminLoginButton">Login</button>
    </div>
    
    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
    <!-- Admin Content Section -->
    <div id="adminContent" style="display: none;">
        <div id="Balance2Guisnexttoteachother">
            <div id="userProfile">
                <img id="userPfp" src="images/userDefaultPfp.png">
                <br>
                <h1>Welcome <a id="usernameReal" style="color: #08b5cc"></a></h1>
                <button id="proficepicturechangbtn" onclick="document.getElementById('pfpInput').click();">Change Profile Picture</button>
                <input type="file" id="pfpInput" accept="image/*">
                <p id="errorUploadMessage"></p>
                <h2>Account registered: <a id="displayAccountRegisteredMsg"></a></h2>
                <div id="balanceContainer">
                    <div id="Balancestuffinsidediv">
                        <p>
                            Account Balance<br>
                            USD: <a id="displayAccountBalanceMsg">3$</a><br>
                        </p>
                    </div>
                    <div id="Balancestuffinsidediv1">
                        <p>
                            Account Balance<br>
                            Crypto: Btc <a id="displayAccountBalanceMsgIncrypto">0.12345</a>
                        </p>
                    </div>
                </div>
                <div id="logoutContainer">
                    <button id="logoutBtn" onclick="logout()">Logout</button>
                </div>
            </div>

            <div id="stats">
                <div id="balanceContainer">
                    <div id="allUsers">
                        <a>Total Users In database:
                            
                             <a id="Tottalusers" style="color: #db0a61;"><b class="container1"  style="align-items: center; text-align: center; left: 65px; height: 50px;"></b></a></a>
                    </div>
                    <div id="usersonlinetoday">
                        <a>Users Online Today: <a id="UsersOnlineToday" style="color: #baeb0b;"><b style="align-items: center; text-align: center; left: 65px; height: 50px;" class="container1"></b></a></a>
                    </div>
                    <div id="ourwallet">
                        <a>Daily Profit: <a id="DailyRevenue" style="color: orange;"><b>383,0832$</b></a></a>
                    </div>
                </div>
                <div id="MyWallet">
                    <a><b>Money In main wallets:</b> <a id="MoneyInWallet"></a></a><br>
                    <a id="allDisplay" style="color: #baeb0b; font-size: larger;"><b>ALL = 524.86 $USD</b></a><br>
                    <a id="Ltcdisplay" style="color: #db0a61;"><b>LTC = 0,7 = 120,03 $USD</b></a><br>
                    <a id="Btcdisplay" style="color: orange;"><b>BTC = 0,00123 = 122,83 $USD</b></a><br>
                    <a id="EthDisplay" style="color: #08b5cc;"><b>ETH = 0,455 = 141 $USD</b></a><br>
                </div>
            </div>
        </div>
    </div>
    <script src="admin.js"></script>



    
<script>
 document.addEventListener("DOMContentLoaded", async () => {
    const userId = sessionStorage.getItem("userId");

    // If userId is not in sessionStorage, show login form
    if (!userId) {
        console.warn("User ID not found. Showing login form.");
        showLoginForm();
        return;
    }

    try {
        // Verify if the user is an admin
        const response = await fetch(`http://localhost:4002/api/verify-admin/${userId}`);
        const data = await response.json();

        // If not an admin, show the login form
        if (!response.ok || !data.isAdmin) {
            console.warn("User verification failed. Showing login form.");
            showLoginForm();
            return;
        }

        // Admin verified, display admin content
        console.log("Admin verified. Access granted.");
        document.getElementById("adminContent").style.display = "block";
    } catch (error) {
        console.error("Error verifying admin:", error);
        showLoginForm();
    }
});

function showLoginForm() {
    // Show the login form and hide admin-only content
    document.getElementById("adminLogin").style.display = "block";
    document.getElementById("adminContent").style.display = "none";
}

async function handleAdminLogin() {
    const username = document.getElementById("adminUsername").value.trim();
    const password = document.getElementById("adminPassword").value.trim();

    try {
        // Perform admin login
        const response = await fetch("http://localhost:4002/api/auth/admin-login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ username, password }),
        });

        const data = await response.json();

        // If login fails, show an error message
        if (!response.ok || !data.isAdmin) {
            alert("Invalid credentials or not an admin.");
            return;
        }

        // Save userId in sessionStorage and reload the page
        sessionStorage.setItem("userId", data.userId);
        alert("Admin login successful!");
        window.location.reload();
    } catch (error) {
        console.error("Error during admin login:", error);
        alert("An error occurred. Please try again.");
    }
}

function logout() {
    // Clear session and reload the page
    sessionStorage.clear();
    alert("Logged out successfully.");
    window.location.reload();
}
</script>
<script>
//     async function fetchAllUsers() {
//         async function fetchAllUsers() {
//   try {
//     const response = await fetch("http://localhost:4002/api/Allusers", {
//       method: "POST",
//       headers: { "Content-Type": "application/json" },
//     });

//     if (response.ok) {
//       const usersAll = await response.json();
//       const userList = usersAll
//         .map(user => `<li>${user.username} - ${user.rank}</li>`)
//         .join("");
//       document.getElementById("UsersOnlineToday").innerHTML = `<ul>${userList}</ul>`;
//     } else {
//       document.getElementById("UsersOnlineToday").innerHTML =
//         "Error fetching users data";
//     }
//   } catch (error) {
//     console.error("Error fetching all users:", error);
//     document.getElementById("UsersOnlineToday").innerHTML =
//       "An error occurred while fetching users.";
//   }
// }
// }


</script>

    </script>
    <script>
        // Free API: CoinGecko public API for real-time crypto prices
        const coins = ['bitcoin', 'ethereum', 'litecoin', 'dogecoin',  'binancecoin']; // More coins added
        const tickerSet1 = document.getElementById('tickerSet1');
        const tickerSet2 = document.getElementById('tickerSet2');
    
        let userCreatedAt = null; // Will store the user's account creation date
    
        async function fetchCryptoData() {
            try {
                const ids = coins.join('%2C');
                const url = `https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=usd&include_24hr_change=true`;
                const response = await fetch(url);
                const data = await response.json();
    
                // Build the items HTML
                let itemsHTML = '';
                coins.forEach(coin => {
                    const price = data[coin].usd.toFixed(2);
                    const change = data[coin].usd_24h_change.toFixed(2);
                    const sign = change >= 0 ? '+' : '';
                    const changeColor = change >= 0 ? '#00ff00' : '#ff4d4d';
    
                    itemsHTML += `
                        <span class="crypto-item">
                            <span class="company">${coin.charAt(0).toUpperCase() + coin.slice(1)}</span>
                            <span class="price">$${price}</span>
                            <span class="change" style="color:${changeColor}">${sign}${change}%</span>
                        </span>&nbsp;
                    `;
                });
    
                // Set both sets with the same items
                tickerSet1.innerHTML = itemsHTML;
                tickerSet2.innerHTML = itemsHTML;
    
            } catch (error) {
                console.error('Error fetching crypto data:', error);
            }
        }
    
        // Initial fetch
        fetchCryptoData();
        // Update every 60 seconds
        setInterval(fetchCryptoData, 60000);
    
        function getCookie(name) {
            let nameEQ = name + "=";
            let ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i].trim();
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }
    
        let username = sessionStorage.getItem("username");
        let userId = sessionStorage.getItem("userId");
    
        if (!username) {
            username = getCookie("username");
        }
    
        if (!userId) {
            console.error("User ID not found. Make sure you store userId at login.");
        }
    
        if (username) {
            document.getElementById("usernameReal").textContent = username;
        } else {
            window.location.href = "login.html";
        }
    
        if (userId) {
  fetch(`http://localhost:4002/api/user/${userId}`)
    .then(res => res.json())
    .then(data => {
      console.log('Fetched user data:', data);
      
      if (data.profilePicture) {
        document.getElementById('userPfp').src = `http://localhost:4002/${data.profilePicture}`;
      }
      
      if (data.username) {
        document.getElementById('usernameReal').textContent = data.username;
      }
      
      if (data.rank) {
        const rankElement = document.createElement('a');
        rankElement.style.color = '#646464';
        rankElement.textContent = ` [${data.rank}]`;
        document.getElementById('usernameReal').after(rankElement);
        if(data.rank === "Admin"){
            rankElement.style.color = '#ff00f2';
            rankElement.style.fontFamily = "monospace";
            rankElement.style.fontSize = "1.5em"
            document.getElementById('usernameReal').after(rankElement);


        }
      }
      
      if (data.createdAt) {
        userCreatedAt = new Date(data.createdAt);
        updateAccountRegisteredTime(); // Update once immediately
        setInterval(updateAccountRegisteredTime, 60000); // Update "Account registered" every 60 seconds
      }
    })
    .catch(err => console.error("Error fetching user info:", err));
}
    
        const pfpInput = document.getElementById('pfpInput');
        const userPfp = document.getElementById('userPfp');
        const errorUploadMessage = document.getElementById('errorUploadMessage');
    
        pfpInput.addEventListener('change', function() {
            const file = this.files[0];
            if (!file) return;
    
            const oldSrc = userPfp.src;
            const formData = new FormData();
            formData.append('profilePicture', file);
            formData.append('userId', userId);
    
            fetch('http://localhost:4002/upload', {
                method: 'POST',
                body: formData
            })
            .then(async response => {
                const text = await response.text();
                if (response.ok) {
                    const reader = new FileReader();
                    reader.addEventListener('load', function() {
                        userPfp.src = reader.result;
                    });
                    reader.readAsDataURL(file);
                    errorUploadMessage.textContent = "";
                } else {
                    userPfp.src = oldSrc;
                    errorUploadMessage.textContent = text || "File upload failed.";
                    setTimeout(() => {
                        errorUploadMessage.textContent = "";
                    }, 3000);
                }
            })
            .catch(error => {
                console.error('Error uploading profile picture:', error);
                userPfp.src = oldSrc;
                errorUploadMessage.textContent = "An error occurred while uploading.";
                setTimeout(() => {
                    errorUploadMessage.textContent = "";
                }, 3000);
            });
        });
    
        function logout() {
            sessionStorage.removeItem("username");
            sessionStorage.removeItem("userId");
            document.cookie = "username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
            window.location.href = "login.html";
        }
    
        function formatTimeDiff(ms) {
            let minutes = Math.floor(ms / 60000);
            let hours = Math.floor(minutes / 60);
            let days = Math.floor(hours / 24);
            let months = Math.floor(days / 30);
    
            if (minutes < 60) {
                return minutes <= 1 ? minutes + " minute" : minutes + " minutes";
            } else if (hours < 24) {
                return hours <= 1 ? hours + " hour" : hours + " hours";
            } else if (days < 30) {
                return days <= 1 ? days + " day" : days + " days";
            } else {
                let remainingDays = days % 30;
                if (months === 1 && remainingDays === 0) {
                    return months + " month";
                } else if (months >= 1 && remainingDays === 0) {
                    return months + " months";
                } else if (months >= 1 && remainingDays > 0) {
                    return months + " months and " + remainingDays + " days";
                }
            }
        }
    
        function updateAccountRegisteredTime() {
            if (!userCreatedAt) return;
            let diff = Date.now() - userCreatedAt.getTime();
            let timeString = formatTimeDiff(diff);
            document.getElementById('displayAccountRegisteredMsg').textContent = timeString;
        }
    </script>

<script>
    // Fetch and update the stats every 10 seconds (10000ms)
    setInterval(async () => {
try {
// Fetch total users
const totalUsersResponse = await fetch("http://localhost:4002/api/stats/total-users");
const totalUsersData = await totalUsersResponse.json();
if (totalUsersResponse.ok) {
  document.getElementById("Tottalusers").textContent = totalUsersData.totalUsers;
} else {
  console.error("Error fetching total users:", totalUsersData.error);
}

// Fetch users online today
const onlineTodayResponse = await fetch("http://localhost:4002/api/stats/online-today");
const onlineTodayData = await onlineTodayResponse.json();
if (onlineTodayResponse.ok) {
  document.getElementById("UsersOnlineToday").textContent = onlineTodayData.onlineToday;
} else {
  console.error("Error fetching users online today:", onlineTodayData.error);
}
} catch (error) {
console.error("Error updating stats:", error);
}
}, 10000); // 10 seconds interval

</script>

<script>
    if (userId) {
  fetch(`http://localhost:4002/api/user/${userId}`)
    .then(res => res.json())
    .then(data => {
      console.log('Fetched user data:', data);

      if (data.profilePicture) {
        document.getElementById('userPfp').src = `http://localhost:4002/${data.profilePicture}`;
      }

      if (data.username) {
        // document.getElementById('usernameReal').textContent = data.username;
      }

      if (data.rank) {
        const rankElement = document.createElement('a');
        rankElement.style.color = '#646464';
        rankElement.textContent = ` [${data.rank}]`;
        // document.getElementById('usernameReal').after(rankElement);
        if (data.rank === "Admin") {
          rankElement.style.color = '#ff00f2';
          rankElement.style.fontFamily = "monospace";
          rankElement.style.fontSize = "1.5em";
        }
      }

      if (data.createdAt) {
        const userCreatedAt = new Date(data.createdAt);
        updateAccountRegisteredTime(userCreatedAt); // Pass createdAt date for calculation
      }
    })
    .catch(err => console.error("Error fetching user info:", err));
}
</script>

<script>


async function testSecurityAPI() {
  try {
    const response = await fetch("http://localhost:4002/api/security", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
    });

    const data = await response.json();
    console.log("Random Number from Backend:", data.randomnumb);
  } catch (error) {
    console.error("Error:", error);
  }
}

testSecurityAPI();
</script>

<script>


async function testSecurityAPI() {
  try {
    const response = await fetch("http://localhost:4002/api/securitycode", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
    });

    const data = await response.json();
    console.log("Random Number from Backend:", data.code);
  } catch (error) {
    console.error("Error:", error);
  }
}

testSecurityAPI();
</script>
</body>
</html>
