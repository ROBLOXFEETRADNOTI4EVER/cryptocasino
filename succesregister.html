<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adjusted Profile Div</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="crypto.css">
    <link rel="shortcut icon" href="images/logo/noBackground/Untitled_2_-removebg-preview.png" type="image/png">
    <style>
        body {
            background: #2e2e2e;
            color: white;
            margin: 0; 
            padding: 0;
            font-family: Arial, sans-serif;
            font-size: 14px;
        }

        #Logo {
            text-align: left;
            padding: 10px;
        }

        #Logo img {
            vertical-align: middle;
            height: 80px;
        }

        #Btn {
            border-radius: 10px;
            margin: 5px; 
            font-size: 2em; 
            padding: 3px 6px; 
        }

        #Btn:hover {
            font-size: 2em; 
        }

        hr {
            border: none;
            height: 1px;
            background-color: dodgerblue;
            margin: 10px 0;
        }

        h1 {
            font-size: 1.2em; 
            margin-left: 10px; 
            margin-top: 10px;
        }

        #stats{
            justify-content: center;
            align-items: center;
            background: rgba(145, 145, 145, 0.048);
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
            padding: 20px; 
            border-radius: 10px;
            width: 90%; 
            text-align: center;
            background: linear-gradient(45deg, #2e2e2e 0%, #aa6f6f73 100%);
            animation: gradient 10s ease-in-out both;
            background-size: 400%; 
            margin: 30px 0 0 20px; 
            font-size: 1em; 
        }
        #userProfile {
            justify-content: center;
            align-items: center;
            background: rgba(145, 145, 145, 0.048);
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
            padding: 20px; 
            border-radius: 10px;
            width: 450px; 
            text-align: center;
            background: linear-gradient(45deg, #2e2e2e 0%, #aa6f6f73 100%);
            animation: gradient 10s ease-in-out both;
            background-size: 400%; 
            margin: 30px 0 0 20px; 
            font-size: 1em; 
        }

        #userProfile img {
            height: 60px; 
            border-radius: 50%;
        }

        #proficepicturechangbtn {
            border-radius: 20px; 
            border: none;
            font-size: 1em; 
            background: linear-gradient(45deg, #b907ab 0%, #aa6f6f73 100%);
            animation: gradient 1s ease-in-out infinite;
            margin-top: -20px; 
            padding: 5px 10px; 
            cursor: pointer;
        }

        #proficepicturechangbtn:hover {
            background: linear-gradient(45deg, #b90784 0%, #db888873 100%);
        }

        #proficepicturechangbtn:active {
            background: linear-gradient(45deg, #ffffff 0%, #5e5e5e 100%);
        }

        h2 {
            font-size: 1.1em; 
            margin-top: 10px;
            margin-bottom: 15px; 
        }

        #balanceContainer {
            display: flex;
            flex-direction: row;
            justify-content: center;
            gap: 20px; 
            margin-top: 20px; 
        }

        #Balance2Guisnexttoteachother{
            display: flex;
            flex-direction: row;
            justify-content: center;
            gap: 20px; 
            margin-top: 20px; 
        }
        #Balancestuffinsidediv, 
        #Balancestuffinsidediv1 {
            justify-content: center;
            align-items: center;
            background: rgba(145, 145, 145, 0.048);
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
            padding: 15px; 
            border-radius: 10px;
            width: 12em; 
            text-align: center;
            background: linear-gradient(45deg, #2e2e2e 0%, #aa6f6f73 100%);
            animation: gradient 10s ease-in-out infinite;
            background-size: 400%;
            font-size: 1em; 
        }

        p, a {
            font-size: 1em; 
        }

        #pfpInput {
            display: none;
        }

        #errorUploadMessage {
            color: red;
            font-family: monospace;
        }

        #logoutContainer {
            display: flex;
            justify-content: flex-end;
            width: 100%;
        }
        
        #logoutBtn {
            border-radius: 20px; 
            border: none;
            font-size: 1em; 
            background: linear-gradient(45deg, #b90707 0%, #aa6f6f73 100%);
            animation: gradient 1s ease-in-out infinite;
            margin-top: 13px; 
            padding: 5px 10px; 
            cursor: pointer;
        }

        #logoutBtn:hover {
            background: linear-gradient(45deg, #b90784 0%, #db888873 100%);
        }

        #logoutBtn:active {
            background: linear-gradient(45deg, #ffffff 0%, #5e5e5e 100%);
        }

        #displayAccountRegisteredMsg {
            color: #2e2e2e;
        }

        /* Continuous Crypto Ticker Styles */
        .stock-ticker {
            overflow: hidden;
            background: #1c1c1c;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            position: relative;
            height: 20px;
            white-space: nowrap;
        }

        .ticker-inner {
            display: inline-block;
            width: 200%; /* Two sets side by side */
            animation: scroll-left 30s linear infinite;
            box-sizing: border-box;
        }

        .ticker-set {
            display: inline-block;
            width: 50%;
        }

        .crypto-item {
            display: inline-block;
            margin: 0 40px;
            font-size: 1.1em;
        }

        .company {
            color: #08b5cc;
            font-weight: bold;
            margin-right: 5px;
        }

        .price {
            color: #fff;
            margin-right: 5px;
        }

        .change {
            color: #ff4d4d;
        }

        @keyframes scroll-left {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        #allUsers{
            justify-content: center;
            align-items: center;
            background: rgba(145, 145, 145, 0.048);
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
            padding: 15px; 
            border-radius: 10px;
            width: 12em; 
            text-align: center;
            background: linear-gradient(45deg, #2e2e2e 0%, #aa6f6f73 100%);
            animation: gradient 10s ease-in-out infinite;
            background-size: 400%;
            font-size: 1em; 
        }
        #ourwallet{
            justify-content: center;
            align-items: center;
            background: rgba(145, 145, 145, 0.048);
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
            padding: 15px; 
            border-radius: 10px;
            width: 12em; 
            text-align: center;
            background: linear-gradient(45deg, #2e2e2e 0%, #aa6f6f73 100%);
            animation: gradient 10s ease-in-out infinite;
            background-size: 400%;
            font-size: 1em; 
        }
        #MyWallet{
            margin-top: 10px;
            justify-content: center;
            align-items: center;
            background: rgba(145, 145, 145, 0.048);
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
            padding: 15px; 
            border-radius: 10px;
            width: 12em; 
            text-align: center;
            background: linear-gradient(45deg, #2e2e2e 0%, #aa6f6f73 100%);
            animation: gradient 10s ease-in-out infinite;
            background-size: 400%;
            font-size: 1em; 
        }
        #secoundndGuiBtn{
            border: none;
            font-size: large;
        }

        #deposit-Withdraw-Crypto{
            justify-content: center;
            align-items: center;
            background: rgba(145, 145, 145, 0.048);
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
            padding: 20px; 
            border-radius: 10px;
            width: 35%;
            /* height: 9em;  */
            text-align: center;
            background: linear-gradient(45deg, #2e2e2e 0%, #aa6f6f73 100%);
            animation: gradient 10s ease-in-out both;
            background-size: 400%; 
            margin: 30px 0 0 20px; 
            font-size: 1em; 
        }

        #HoldCrypto{
            /* justify-content: center; */
            /* align-items: center; */
            background: rgba(145, 145, 145, 0.048);
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
            padding: 20px; 
            border-radius: 10px;
            width: 400px;
            /* height: 9em;  */
            text-align: center;
            background: linear-gradient(45deg, #2e2e2e 0%, #aa6f6f73 100%);
            animation: gradient 10s ease-in-out both;
            background-size: 400%; 
            margin: 30px 0 0 20px; 
            font-size: 1em; 
            transition: color,  8s;

        }

        #HoldCrypto::before{
            /* justify-content: center; */
            /* align-items: center; */
            background: rgba(145, 145, 145, 0.048);
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
            padding: 20px; 
            border-radius: 10px;
            width: 400px;
            /* height: 9em;  */
            text-align: center;
            background: linear-gradient(45deg, #2e2e2e 0%, #aa6f6f73 100%);
            animation: gradient 10s ease-in-out both;
            background-size: 400%; 
            margin: 30px 0 0 20px; 
            font-size: 1em; 
            transition: color,  8s;

        }

        #HoldCrypto:hover{
            /* justify-content: center; */
            /* align-items: center; */
            background: rgba(156, 82, 128, 0.692);
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
            padding: 20px; 
            border-radius: 10px;
            width: 400px;
            /* height: 9em;  */
            text-align: center;
            /* background: linear-gradient(45deg, #2e2e2e 0%, #aa6f6f73 100%);
            animation: gradient 10s ease-in-out both; */
            background-size: 400%; 
            margin: 30px 0 0 20px; 
            font-size: 1em; 
            transition: color,  8s;


        }
        #groupeverything-together{
            display: flex;
            flex-direction: row;
            justify-content: center;
            gap: 20px; 
            margin-top: 20px; 
        }
        #alignfuckinghsititems{
            display: flex;
            flex-direction: row;
            justify-content: center;
            gap: 20px; 
            margin-top: 20px;  
        }
        .withdrawbtnn{
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);

            border: none;
            border-radius: 5px;
            width: 20%;
            background-color: #9e33338c;
            border-color: #000000;
            transition: color,  2s;
            

        }
        .withdrawbtnn:hover{
            border: none;
            border-radius: 5px;
            width: 20%;
            background-color: #6a62afe8;
            border-color: #000000;
            color: wheat;
            font-weight: bold;
            
        }
        .withdrawbtnn:active{
            border: none;
            border-radius: 5px;
            width: 20%;
            background-color: #46b62fee;
            border-color: #000000;
        }
        #Cryptoonhoverchangecolor{
            transition: color, 3s;
            user-select: none;
        }
        #Cryptoonhoverchangecolor:hover{
            color: orange;
        }
        #withdaw11{
            transition: color, 2s;
            color: black;
        }
        #withdaw11:hover{
            transition: color, 2s;
            color: white;
        }
        #despomespo{
            transition: color, 2s;
            color:white;
            user-select: none;
        }
        #despomespo:hover{
            transition: color, 2s;
            color: black;
        }
        
        .text-container {
    transition: color 2s;
    user-select: none;
}

.text-container #despomespo {
    color: white;
    transition: color 2s;
}

.text-container #withdaw11 {
    color: black;
    transition: color 2s;
}

.text-container .slash {
    color: white;
    transition: color 2s;
}

.text-container:hover #despomespo {
    color: black;
}

.text-container:hover #withdaw11 {
    color: white;
}

.text-container:hover .slash {
    color: orange;
}

.text-container #Cryptoonhoverchangecolor {
    color: rgb(255, 255, 255);
    text-decoration: none;
    
}
.text-container:hover #Cryptoonhoverchangecolor{
    color: orange;
}

#Transaction-History{
    justify-content: center;
            align-items: center;
            background: rgba(145, 145, 145, 0.048);
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
            padding: 20px; 
            border-radius: 10px;
            width: 85%;
            /* height: 9em;  */
            text-align: center;
            background: linear-gradient(45deg, #2e2e2e 0%, #aa6f6f73 100%);
            animation: gradient 10s ease-in-out both;
            background-size: 400%; 
            margin: 30px 0 0 20px; 
            font-size: 1em; 
}



    </style>

<style>

.toast-container::before{
    transition: opacity 0.5s ease, transform 0.5s ease; 

}
.toast-container {
    position: fixed;
    top: 20px; 
    right: 20px; 
    display: flex;
    flex-direction: column; 
    gap: 10px; 
    max-height: calc(100vh - 40px); 
    overflow: hidden; 
    z-index: 1000;
    transition: opacity 0.5s ease, transform 0.5s ease; 
}

.toast {
    padding: 15px 20px;
    background-color: #333;
    color: white;
    border-radius: 6px; 
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3); 
    font-size: 16px;
    opacity: 1;
    transform: translateY(0); 
    transition: opacity 0.5s ease, transform 0.5s ease; 
}

.toast.fade-out {
    opacity: 0; 
    transform: translateY(-20px); 
}




</style>
<div id="toastContainer" class="toast-container"></div>
<body>
<script>
 document.addEventListener('DOMContentLoaded', function () {
    const toastContainer = document.getElementById('toastContainer');

    function showPopup(type, message, color) {
        const popup = document.createElement('div');
        popup.classList.add('toast'); 

        popup.innerHTML = `<span style="color: ${color}; font-weight: bold;">${type}</span> ${message}`;

        toastContainer.appendChild(popup); 
        setTimeout(() => {
            popup.classList.add('fade-out');
            popup.addEventListener('transitionend', () => popup.remove());
        }, 4000);
    }
    const cryptoDivs = document.querySelectorAll('#HoldCrypto');

    cryptoDivs.forEach(function (div) {
        div.style.cursor = 'pointer';

        div.addEventListener('click', function (event) {
            if (event.target.tagName.toLowerCase() === 'button' || event.target.tagName.toLowerCase() === 'a') {
                return;
            }

            let copyText = '';
            let type = '';
            let color = '';

            const btcSpan = div.querySelector('#copybtc4real');
            const ltcSpan = div.querySelector('#copyltc4real');
            const ethSpan = div.querySelector('#copyeth4real');

            if (btcSpan) {
                copyText = btcSpan.innerText.trim();
                type = 'BTC';
                color = 'orange';
            } else if (ltcSpan) {
                copyText = ltcSpan.innerText.trim();
                type = 'LTC';
                color = 'lightblue';
            } else if (ethSpan) {
                copyText = ethSpan.innerText.trim();
                type = 'ETH';
                color = 'gray';
            } else {
                console.error('No cryptocurrency address found in the clicked div.');
                return;
            }

            navigator.clipboard.writeText(copyText).then(function () {
                showPopup(type, 'Copied!', color);
            }).catch(function (err) {
                console.error('Failed to copy text: ', err);
            });
        });
    });
});


        
    </script>
    <script>
        
    </script>
    <div id="Logo">
        <img src="images/Untitled(1).png" alt="Logo" id="lLogo" draggable="false">
        <input type="button" id="Btn" value="HomePage">
        <input type="button" id="Btn" value="PlayGames">
        <input type="button" id="Btn" value="FAQ">
        <input type="button" id="Btn" value="User">
    </div>
    <hr>
    <div class="stock-ticker" style="position: sticky;">
        <div class="ticker-inner">
            <div class="ticker-set" id="tickerSet1"></div>
            <div class="ticker-set" id="tickerSet2"></div>
        </div>
    

    
    <hr>
    </div>
    <hr>
    
    <div id="groupeverything-together">
    <div id="userProfile">
        <img id="userPfp" src="images/userDefaultPfp.png">
        <br>
        <h1>Welcome <a id="usernameReal" style="color: #08b5cc"></a></h1>

        <button id="proficepicturechangbtn" onclick="document.getElementById('pfpInput').click();">Change Profile Picture</button>
        <input type="file" id="pfpInput" accept="image/*">
        <p id="errorUploadMessage"></p>
        <h2>Account registered: <a id="displayAccountRegisteredMsg"></a></h2>
    
        <div id="balanceContainer">
            <div id="Balancestuffinsidediv">
                <p>
                    Account Balance<br>
                    USD: <a id="displayAccountBalanceMsg">3$</a><br>
                </p>
            </div>
            <div id="Balancestuffinsidediv1">
                <p>
                    Account Balance<br>
                    Crypto: Btc <a id="displayAccountBalanceMsgIncrypto">0.12345</a>
                </p>
            </div>
        </div>
        <div id="Transaction-History">
            <span style="text-align: center;">Transaction-History</span>
        </div>
        
        <div id="logoutContainer">
            <button id="logoutBtn" onclick="logout()">Logout</button>
        </div>
    </div>

    <div id="deposit-Withdraw-Crypto">
        <div id="alignfuckinghsititems">
            <h1 class="text-container">
                <b>
                    <a id="despomespo">Deposit</a>
                    <span class="slash"> / </span>
                    <a id="withdaw11">Withdraw</a>
                    <a id="Cryptoonhoverchangecolor">Crypto</a>
                </b>
            </h1>
            <input class="withdrawbtnn" type="button" value="Withdraw">
            
            
                    </div>
        <div id="HoldCrypto">
            <h1><span style="user-select: none;"><b>YOUR  <a style="color: orange;">BTC</a> ADRESS IS:</span> <a id="Adress" style="color: orange;"><button style="border: none; background: none; font-size: large; font-weight: bold;" onclick="CopyCrypto('btc')"><span id="copybtc4real">btcrukfbe83mvk39283bb29c10n8</span></a><br></b></button><br>
                <span style="user-select: none;"><a>Money inside BTC wallet: <a id="Btcinsidewallet" style="color: greenyellow;"><span id="btckillmyself"> 0.000487294</span></a></span> </a></h1>
        </div>
        <div id="HoldCrypto">
        <h1><span style="user-select: none;"><b>YOUR  <a style="color: rgb(47, 255, 210);">LTC</a> ADRESS IS:</span> <a id="Adress" style="color: rgb(90, 168, 149);"><button style="border: none; background: none; font-size: large; font-weight: bold;" onclick="CopyCrypto('ltc')"><span id="copyltc4real">ltcrukfbe83mvk39283bb29c10n8</span></a></button><br></b>
            <span style="user-select: none;"> <a>Money inside LTC wallet: <a id="Ltcinsidewallet" style="color: rgb(47, 255, 210);">0.000487294</a> </a></h1></span>
        </div>
        <div id="HoldCrypto">    
        <h1><span style="user-select: none;"><b>YOUR  <a style="color: #8a8a8a;">ETH</a> ADRESS IS:</span> <a id="Adress" style="color: #8a8a8a;"><button style="border: none; background: none; font-size: large; font-weight: bold;" onclick="CopyCrypto('eth')"><span id="copyeth4real">ethrukfbe83mvk39283bb29c10n8</span></a><br></b></button><br>
            <span style="user-select: none;"> <a>Money inside ETH wallet: <a id="Ethinsidewallet" style="color: rgb(248, 47, 255);"><span></span>0.000487294</a> </a></h1></span>
                    </div>
            </div>


</div>


</div>
    <script>
    document.addEventListener("DOMContentLoaded", async () => {
  const userId = sessionStorage.getItem("userId");

  if (!userId) {
    console.error("User ID not found. Redirecting to login.");
    window.location.href = "login.html";
    return;
  }

  try {
    const response = await fetch(`http://localhost:4002/api/user/${userId}`);
    if (!response.ok) {
      console.error("Error verifying user. Redirecting to login.");
      window.location.href = "login.html";
      return;
    }

    const data = await response.json();
    const usernameReal = document.getElementById("usernameReal");
    usernameReal.textContent = data.username;

    if (data.rank === "Admin") {
      // Redirect to admin.html if rank is Admin
      window.location.href = "admin.html";
    } else {
      // Display rank on current page for non-admins
      displayRank(data.rank);
    }
  } catch (error) {
    console.error("Error verifying user:", error);
    window.location.href = "login.html";
  }
});

function displayRank(rank) {
  const rankElement = document.createElement("span");
//   rankElement.textContent = ` [${rank}]`;
  rankElement.style.color = "#08b5cc";
  rankElement.style.marginLeft = "5px";
  document.getElementById("usernameReal").appendChild(rankElement);
}


    </script>
    <script>
        // Free API: CoinGecko public API for real-time crypto prices
        const coins = ['bitcoin', 'ethereum', 'litecoin', 'dogecoin',  'binancecoin']; // More coins added
        const tickerSet1 = document.getElementById('tickerSet1');
        const tickerSet2 = document.getElementById('tickerSet2');
    
        let userCreatedAt = null; // Will store the user's account creation date
    
        async function fetchCryptoData() {
            try {
                const ids = coins.join('%2C');
                const url = `https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=usd&include_24hr_change=true`;
                const response = await fetch(url);
                const data = await response.json();
    
                // Build the items HTML
                let itemsHTML = '';
                coins.forEach(coin => {
                    const price = data[coin].usd.toFixed(2);
                    const change = data[coin].usd_24h_change.toFixed(2);
                    const sign = change >= 0 ? '+' : '';
                    const changeColor = change >= 0 ? '#00ff00' : '#ff4d4d';
    
                    itemsHTML += `
                        <span class="crypto-item">
                            <span class="company">${coin.charAt(0).toUpperCase() + coin.slice(1)}</span>
                            <span class="price">$${price}</span>
                            <span class="change" style="color:${changeColor}">${sign}${change}%</span>
                        </span>&nbsp;
                    `;
                });
    
                // Set both sets with the same items
                tickerSet1.innerHTML = itemsHTML;
                tickerSet2.innerHTML = itemsHTML;
    
            } catch (error) {
                console.error('Error fetching crypto data:', error);
            }
        }
    
        // Initial fetch
        fetchCryptoData();
        // Update every 60 seconds
        setInterval(fetchCryptoData, 60000);
    
        function getCookie(name) {
            let nameEQ = name + "=";
            let ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i].trim();
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }
    
        let username = sessionStorage.getItem("username");
        let userId = sessionStorage.getItem("userId");
    
        if (!username) {
            username = getCookie("username");
        }
    
        if (!userId) {
            console.error("User ID not found. Make sure you store userId at login.");
        }
    
        if (username) {
            document.getElementById("usernameReal").textContent = username;
        } else {
            window.location.href = "login.html";
        }
    
        if (userId) {
  fetch(`http://localhost:4002/api/user/${userId}`)
    .then(res => res.json())
    .then(data => {
      console.log('Fetched user data:', data);
      
      if (data.profilePicture) {
        document.getElementById('userPfp').src = `http://localhost:4002/${data.profilePicture}`;
      }
      
      if (data.username) {
        document.getElementById('usernameReal').textContent = data.username;
      }
      
      if (data.rank) {
        const rankElement = document.createElement('a');
        rankElement.style.color = '#646464';
        rankElement.textContent = ` [${data.rank}]`;
        document.getElementById('usernameReal').after(rankElement);
        if(data.rank === "Admin"){
            rankElement.style.color = '#ff00f2';
            rankElement.style.fontFamily = "monospace";
            rankElement.style.fontSize = "1.5em"
            document.getElementById('usernameReal').after(rankElement);


        }
      }
      
      if (data.createdAt) {
        userCreatedAt = new Date(data.createdAt);
        updateAccountRegisteredTime(); // Update once immediately
        setInterval(updateAccountRegisteredTime, 60000); // Update "Account registered" every 60 seconds
      }
    })
    .catch(err => console.error("Error fetching user info:", err));
}
    
        const pfpInput = document.getElementById('pfpInput');
        const userPfp = document.getElementById('userPfp');
        const errorUploadMessage = document.getElementById('errorUploadMessage');
    
        pfpInput.addEventListener('change', function() {
            const file = this.files[0];
            if (!file) return;
    
            const oldSrc = userPfp.src;
            const formData = new FormData();
            formData.append('profilePicture', file);
            formData.append('userId', userId);
    
            fetch('http://localhost:4002/upload', {
                method: 'POST',
                body: formData
            })
            .then(async response => {
                const text = await response.text();
                if (response.ok) {
                    const reader = new FileReader();
                    reader.addEventListener('load', function() {
                        userPfp.src = reader.result;
                    });
                    reader.readAsDataURL(file);
                    errorUploadMessage.textContent = "";
                } else {
                    userPfp.src = oldSrc;
                    errorUploadMessage.textContent = text || "File upload failed.";
                    setTimeout(() => {
                        errorUploadMessage.textContent = "";
                    }, 3000);
                }
            })
            .catch(error => {
                console.error('Error uploading profile picture:', error);
                userPfp.src = oldSrc;
                errorUploadMessage.textContent = "An error occurred while uploading.";
                setTimeout(() => {
                    errorUploadMessage.textContent = "";
                }, 3000);
            });
        });
    
        function logout() {
            sessionStorage.removeItem("username");
            sessionStorage.removeItem("userId");
            document.cookie = "username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
            window.location.href = "login.html";
        }
    
        function formatTimeDiff(ms) {
            let minutes = Math.floor(ms / 60000);
            let hours = Math.floor(minutes / 60);
            let days = Math.floor(hours / 24);
            let months = Math.floor(days / 30);
    
            if (minutes < 60) {
                return minutes <= 1 ? minutes + " minute" : minutes + " minutes";
            } else if (hours < 24) {
                return hours <= 1 ? hours + " hour" : hours + " hours";
            } else if (days < 30) {
                return days <= 1 ? days + " day" : days + " days";
            } else {
                let remainingDays = days % 30;
                if (months === 1 && remainingDays === 0) {
                    return months + " month";
                } else if (months >= 1 && remainingDays === 0) {
                    return months + " months";
                } else if (months >= 1 && remainingDays > 0) {
                    return months + " months and " + remainingDays + " days";
                }
            }
        }
    
        function updateAccountRegisteredTime() {
            if (!userCreatedAt) return;
            let diff = Date.now() - userCreatedAt.getTime();
            let timeString = formatTimeDiff(diff);
            document.getElementById('displayAccountRegisteredMsg').textContent = timeString;
        }
    </script>
    

    <script>
        document.addEventListener("DOMContentLoaded", async () => {
  const userId = sessionStorage.getItem("userId");

  if (!userId) {
    console.error("User ID not found. Redirecting to login.");
    window.location.href = "login.html";
    return;
  }

  async function fetchAndDisplayCryptoAddresses() {
    try {
      const response = await fetch("http://localhost:4002/api/auth/DisplayUserCryptoAdresses", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ userId }),
      });

      const data = await response.json();

      if (data.bitcoinAdress) document.getElementById("copybtc4real").innerText = data.bitcoinAdress;
      if (data.bitcoinnumb !== undefined) document.getElementById("btckillmyself").innerText = data.bitcoinnumb;
      if (data.litecoinAdress) document.getElementById("copyltc4real").innerText = data.litecoinAdress;
      if (data.litecoinNumb !== undefined) document.getElementById("Ltcinsidewallet").innerText = data.litecoinNumb;
      if (data.etheriumAdress) document.getElementById("copyeth4real").innerText = data.etheriumAdress;
      if (data.etheriumnumb !== undefined) document.getElementById("Ethinsidewallet").innerText = data.etheriumnumb;

      console.log("Crypto addresses updated:", data);
    } catch (error) {
      console.error("Error fetching crypto addresses:", error);
    }
  }

  fetchAndDisplayCryptoAddresses();

  setInterval(fetchAndDisplayCryptoAddresses, Math.floor(Math.random() * 5000) + 15000);
});


        </script>
</body>
</html>
